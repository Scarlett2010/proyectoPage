---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import scale from "../assets/scale.png";
import whatsapp from "../assets/whatsapp.png";
import email from "../assets/email.png";
---

<html lang="es">
  <head>
    <BaseHead
      title="Contacto"
      description="Completa el formulario para solicitar una consulta legal personalizada"
    />
  </head>
  <body>
    <Header />

    <main class="form">
      <h1>Contacto</h1>
      <p class="subtitulo">
        Completa el formulario para solicitar una consulta legal personalizada
      </p>
      <form id="formulario" class="form-card">
        <div class="form-row">
          <div class="form-group">
            <label>Nombre completo *</label>
            <input
              type="text"
              name="nombres"
              placeholder="Ingresa tu nombre completo"
              required
            />
          </div>
          <div class="form-group">
            <label>Correo *</label>
            <input
              type="text"
              name="correo"
              placeholder="ejemplo@ejemplo.com"
              required
            />
          </div>
          <div class="form-group">
            <label>Número de celular *</label>
            <input
              type="number"
              name="numero"
              placeholder="+593 99 123 4567"
              required
            />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Especialidad de asesoramiento *</label>
            <select name="especialidad" required>
              <option value="">Selecciona el tipo de asesoramiento</option>
              <option value="civil">Derecho Procesal Penal</option>
              <option value="penal">Derecho Constitucional</option>
              <option value="laboral">Derecho Civil</option>
              <option value="empresarial">Otro</option>
            </select>
          </div>
          <div class="form-group">
            <label>Agendar cita (opcional)</label>
            <input type="date" name="fecha" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group full-width">
            <label>Describe tu caso o consulta *</label>
            <textarea
              name="descripcion"
              rows="3"
              placeholder="Proporciona detalles sobre tu situación legal..."
              required></textarea>
          </div>
        </div>
        <button type="submit">Enviar solicitud de consulta</button>
      </form>

      <div class="contact-cards">
        <div class="contact-card">
          <li>
            <img src={whatsapp.src} alt="Tlf" />
            <a href="https://wa.me/593983844657" target="_blank" rel="noopener">
              +593 983844657
            </a>
          </li>
        </div>
        <div class="contact-card">
          <li>
            <img src={email.src} alt="Correo" />
            <a href="mailto:dr.jorgeona@gmail.com"> dr.jorgeona@gmail.com </a>
          </li>
        </div>
      </div>
    </main>

    <Footer />
    <script>
      document
        .getElementById("formulario")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const formData = new FormData(e.target);
          const data = Object.fromEntries(formData.entries());

          const res = await fetch("/api/envioCorreo", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });

          if (res.ok) {
            alert("Solicitud enviada correctamente.");
            e.target.reset();
          } else {
            alert("Error al enviar la solicitud.");
          }
        });
    </script>

    <style>
      main {
        max-width: 800px;
        margin: 0 auto;
        padding: 2em 1em;
        font-family: system-ui, sans-serif;
      }
      .form {
        background-color: rgb(221, 238, 248);
        width: 100%;
      }
      h1 {
        text-align: center;
        margin-bottom: 0.3em;
        color: #0041c4;
      }

      .subtitulo {
        text-align: center;
        color: #121111;
        margin-bottom: 1.5em;
        font-size: 1.1em;
      }

      .form-card {
        background: #fff;
        border-radius: 14px;
        box-shadow: 0 2px 16px rgba(0, 0, 0, 0.08);
        padding: 2em 1.5em;
        margin-bottom: 2em;
        border: 1px solid #e3e3e3;
      }

      .form-row {
        display: flex;
        gap: 1.5em;
        margin-bottom: 1em;
      }

      .form-group {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .form-group.full-width {
        flex: 2;
      }

      label {
        font-weight: 500;
        margin-bottom: 0.4em;
        color: #6595f6;
      }

      input,
      select,
      textarea {
        width: 100%;
        padding: 0.7em;
        font-size: 1em;
        border: 1px solid #b5b6b9;
        border-radius: 7px;
        box-sizing: border-box;
        background: #f7f8fa;
        margin-bottom: 0.2em;
        transition: border-color 0.2s;
        color: #bec0c2;
      }

      input::placeholder,
      textarea::placeholder {
        color: #b5b6b9;
      }

      input:focus,
      select:focus,
      textarea:focus {
        border-color: #007bff;
        outline: none;
      }

      textarea {
        resize: vertical;
      }

      button[type="submit"] {
        background-color: #d97706;
        color: white;
        padding: 1em 0.5em;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1em;
        font-weight: 500;
        margin-top: 1em;
        transition: background 0.3s;
      }

      button[type="submit"]:hover {
        background-color: #20d362;
      }

      .contact-cards {
        display: flex;
        gap: 1.5em;
        justify-content: center;
        margin-top: 1.5em;
        flex-wrap: wrap;
      }

      .contact-card {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.07);
        border: 1px solid #e3e3e3;
        padding: 1.2em 1em;
        min-width: 180px;
        display: flex;
        align-items: center;
        gap: 0.8em;
        flex: 1 1 180px;
        max-width: 240px;
      }

      .contact-card img {
        width: 40px;
        height: 40px;
        object-fit: contain;
      }

      .contact-title {
        font-weight: 600;
        font-size: 1em;
        margin-bottom: 0.2em;
      }

      .contact-info {
        color: #222;
        font-size: 0.98em;
      }

      ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      li {
        display: flex;
        align-items: center;
        gap: 0.5em;
        margin: 0.3em 0;
      }

      @media (max-width: 700px) {
        .form-row {
          flex-direction: column;
          gap: 0.5em;
        }
        .contact-cards {
          flex-direction: column;
          gap: 1em;
        }
        .contact-card {
          max-width: 100%;
        }
      }
    </style>
  </body>
</html>
